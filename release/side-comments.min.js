function require(e,t,n){var r=require.resolve(e);if(null==r){n=n||e,t=t||"root";var i=new Error('Failed to require "'+n+'" from "'+t+'"');throw i.path=n,i.parent=t,i.require=!0,i}var o=require.modules[r];if(!o._resolving&&!o.exports){var s={};s.exports={},s.client=s.component=!0,o._resolving=!0,o.call(this,s.exports,require.relative(r),s),delete o._resolving,o.exports=s.exports}return o.exports}require.modules={},require.aliases={},require.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var t=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],n=0;n<t.length;n++){var e=t[n];if(require.modules.hasOwnProperty(e))return e;if(require.aliases.hasOwnProperty(e))return require.aliases[e]}},require.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var r=0;r<t.length;++r)".."==t[r]?e.pop():"."!=t[r]&&""!=t[r]&&n.push(t[r]);return e.concat(n).join("/")},require.register=function(e,t){require.modules[e]=t},require.alias=function(e,t){if(!require.modules.hasOwnProperty(e))throw new Error('Failed to alias "'+e+'", it does not exist');require.aliases[t]=e},require.relative=function(e){function t(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function n(t){var r=n.resolve(t);return require(r,e,t)}var r=require.normalize(e,"..");return n.resolve=function(n){var i=n.charAt(0);if("/"==i)return n.slice(1);if("."==i)return require.normalize(r,n);var o=e.split("/"),s=t(o,"deps")+1;return s||(s=0),n=o.slice(0,s+1).join("/")+"/deps/"+n},n.exists=function(e){return require.modules.hasOwnProperty(n.resolve(e))},n},require.register("component-emitter/index.js",function(e,t,n){function r(e){return e?i(e):void 0}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}n.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),require.register("eightmedia-hammer.js/hammer.js",function(e,t,n){!function(e,t){"use strict";function r(){i.READY||(b.determineEventTypes(),y.each(i.gestures,function(e){C.register(e)}),b.onTouch(i.DOCUMENT,d,C.detect),b.onTouch(i.DOCUMENT,f,C.detect),i.READY=!0)}var i=function E(e,t){return new E.Instance(e,t||{})};i.VERSION="1.1.3",i.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.DOCUMENT=document,i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in e,i.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&i.IS_MOBILE||i.HAS_POINTEREVENTS,i.CALCULATE_INTERVAL=25;var o={},s=i.DIRECTION_DOWN="down",a=i.DIRECTION_LEFT="left",c=i.DIRECTION_UP="up",l=i.DIRECTION_RIGHT="right",u=i.POINTER_MOUSE="mouse",p=i.POINTER_TOUCH="touch",h=i.POINTER_PEN="pen",m=i.EVENT_START="start",d=i.EVENT_MOVE="move",f=i.EVENT_END="end",g=i.EVENT_RELEASE="release",v=i.EVENT_TOUCH="touch";i.READY=!1,i.plugins=i.plugins||{},i.gestures=i.gestures||{};var y=i.utils={extend:function(e,n,r){for(var i in n)!n.hasOwnProperty(i)||e[i]!==t&&r||(e[i]=n[i]);return e},on:function(e,t,n){e.addEventListener(t,n,!1)},off:function(e,t,n){e.removeEventListener(t,n,!1)},each:function(e,n,r){var i,o;if("forEach"in e)e.forEach(n,r);else if(e.length!==t){for(i=0,o=e.length;o>i;i++)if(n.call(r,e[i],i,e)===!1)return}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return},inStr:function(e,t){return e.indexOf(t)>-1},inArray:function(e,t){if(e.indexOf){var n=e.indexOf(t);return-1===n?!1:n}for(var r=0,i=e.length;i>r;r++)if(e[r]===t)return r;return!1},toArray:function(e){return Array.prototype.slice.call(e,0)},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){var t=[],n=[],r=[],i=[],o=Math.min,s=Math.max;return 1===e.length?{pageX:e[0].pageX,pageY:e[0].pageY,clientX:e[0].clientX,clientY:e[0].clientY}:(y.each(e,function(e){t.push(e.pageX),n.push(e.pageY),r.push(e.clientX),i.push(e.clientY)}),{pageX:(o.apply(Math,t)+s.apply(Math,t))/2,pageY:(o.apply(Math,n)+s.apply(Math,n))/2,clientX:(o.apply(Math,r)+s.apply(Math,r))/2,clientY:(o.apply(Math,i)+s.apply(Math,i))/2})},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.clientX-e.clientX,r=t.clientY-e.clientY;return 180*Math.atan2(r,n)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.clientX-t.clientX),r=Math.abs(e.clientY-t.clientY);return n>=r?e.clientX-t.clientX>0?a:l:e.clientY-t.clientY>0?c:s},getDistance:function(e,t){var n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==c||e==s},setPrefixedCss:function(e,t,n,r){var i=["","Webkit","Moz","O","ms"];t=y.toCamelCase(t);for(var o=0;o<i.length;o++){var s=t;if(i[o]&&(s=i[o]+s.slice(0,1).toUpperCase()+s.slice(1)),s in e.style){e.style[s]=(null==r||r)&&n||"";break}}},toggleBehavior:function(e,t,n){if(t&&e&&e.style){y.each(t,function(t,r){y.setPrefixedCss(e,r,t,n)});var r=n&&function(){return!1};"none"==t.userSelect&&(e.onselectstart=r),"none"==t.userDrag&&(e.ondragstart=r)}},toCamelCase:function(e){return e.replace(/[_-]([a-z])/g,function(e){return e[1].toUpperCase()})}},b=i.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(e,t,n,r){var i=t.split(" ");y.each(i,function(t){y.on(e,t,n),r&&r(t)})},off:function(e,t,n,r){var i=t.split(" ");y.each(i,function(t){y.off(e,t,n),r&&r(t)})},onTouch:function(e,t,n){var r=this,s=function(o){var s,a=o.type.toLowerCase(),c=i.HAS_POINTEREVENTS,l=y.inStr(a,"mouse");l&&r.preventMouseEvents||(l&&t==m&&0===o.button?(r.preventMouseEvents=!1,r.shouldDetect=!0):c&&t==m?r.shouldDetect=1===o.buttons||x.matchType(p,o):l||t!=m||(r.preventMouseEvents=!0,r.shouldDetect=!0),c&&t!=f&&x.updatePointer(t,o),r.shouldDetect&&(s=r.doDetect.call(r,o,t,e,n)),s==f&&(r.preventMouseEvents=!1,r.shouldDetect=!1,x.reset()),c&&t==f&&x.updatePointer(t,o))};return this.on(e,o[t],s),s},doDetect:function(e,t,n,r){var i=this.getTouchList(e,t),o=i.length,s=t,a=i.trigger,c=o;t==m?a=v:t==f&&(a=g,c=i.length-(e.changedTouches?e.changedTouches.length:1)),c>0&&this.started&&(s=d),this.started=!0;var l=this.collectEventData(n,s,i,e);return t!=f&&r.call(C,l),a&&(l.changedLength=c,l.eventType=a,r.call(C,l),l.eventType=s,delete l.changedLength),s==f&&(r.call(C,l),this.started=!1),s},determineEventTypes:function(){var t;return t=i.HAS_POINTEREVENTS?e.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],o[m]=t[0],o[d]=t[1],o[f]=t[2],o},getTouchList:function(e,t){if(i.HAS_POINTEREVENTS)return x.getTouchList();if(e.touches){if(t==d)return e.touches;var n=[],r=[].concat(y.toArray(e.touches),y.toArray(e.changedTouches)),o=[];return y.each(r,function(e){y.inArray(n,e.identifier)===!1&&o.push(e),n.push(e.identifier)}),o}return e.identifier=1,[e]},collectEventData:function(e,t,n,r){var i=p;return y.inStr(r.type,"mouse")||x.matchType(u,r)?i=u:x.matchType(h,r)&&(i=h),{center:y.getCenter(n),timeStamp:Date.now(),target:r.target,touches:n,eventType:t,pointerType:i,srcEvent:r,preventDefault:function(){var e=this.srcEvent;e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return C.stopDetect()}}}},x=i.PointerEvent={pointers:{},getTouchList:function(){var e=[];return y.each(this.pointers,function(t){e.push(t)}),e},updatePointer:function(e,t){e==f?delete this.pointers[t.pointerId]:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t)},matchType:function(e,t){if(!t.pointerType)return!1;var n=t.pointerType,r={};return r[u]=n===(t.MSPOINTER_TYPE_MOUSE||u),r[p]=n===(t.MSPOINTER_TYPE_TOUCH||p),r[h]=n===(t.MSPOINTER_TYPE_PEN||h),r[e]},reset:function(){this.pointers={}}},C=i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:y.extend({},t),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);var t=this.current.inst,n=t.options;return y.each(this.gestures,function(r){!this.stopped&&t.enabled&&n[r.name]&&r.handler.call(r,e,t)},this),this.current&&(this.current.lastEvent=e),e.eventType==f&&this.stopDetect(),e}},stopDetect:function(){this.previous=y.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(e,t,n,r,o){var s=this.current,a=!1,c=s.lastCalcEvent,l=s.lastCalcData;c&&e.timeStamp-c.timeStamp>i.CALCULATE_INTERVAL&&(t=c.center,n=e.timeStamp-c.timeStamp,r=e.center.clientX-c.center.clientX,o=e.center.clientY-c.center.clientY,a=!0),(e.eventType==v||e.eventType==g)&&(s.futureCalcEvent=e),(!s.lastCalcEvent||a)&&(l.velocity=y.getVelocity(n,r,o),l.angle=y.getAngle(t,e.center),l.direction=y.getDirection(t,e.center),s.lastCalcEvent=s.futureCalcEvent||e,s.futureCalcEvent=e),e.velocityX=l.velocity.x,e.velocityY=l.velocity.y,e.interimAngle=l.angle,e.interimDirection=l.direction},extendEventData:function(e){var t=this.current,n=t.startEvent,r=t.lastEvent||n;(e.eventType==v||e.eventType==g)&&(n.touches=[],y.each(e.touches,function(e){n.touches.push({clientX:e.clientX,clientY:e.clientY})}));var i=e.timeStamp-n.timeStamp,o=e.center.clientX-n.center.clientX,s=e.center.clientY-n.center.clientY;return this.getCalculatedData(e,r.center,i,o,s),y.extend(e,{startEvent:n,deltaTime:i,deltaX:o,deltaY:s,distance:y.getDistance(n.center,e.center),angle:y.getAngle(n.center,e.center),direction:y.getDirection(n.center,e.center),scale:y.getScale(n.touches,e.touches),rotation:y.getRotation(n.touches,e.touches)}),e},register:function(e){var n=e.defaults||{};return n[e.name]===t&&(n[e.name]=!0),y.extend(i.defaults,n,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}};i.Instance=function(e,t){var n=this;r(),this.element=e,this.enabled=!0,y.each(t,function(e,n){delete t[n],t[y.toCamelCase(n)]=e}),this.options=y.extend(y.extend({},i.defaults),t||{}),this.options.behavior&&y.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=b.onTouch(e,m,function(e){n.enabled&&e.eventType==m?C.startDetect(n,e):e.eventType==v&&C.detect(e)}),this.eventHandlers=[]},i.Instance.prototype={on:function(e,t){var n=this;return b.on(n.element,e,t,function(e){n.eventHandlers.push({gesture:e,handler:t})}),n},off:function(e,t){var n=this;return b.off(n.element,e,t,function(e){var r=y.inArray({gesture:e,handler:t});r!==!1&&n.eventHandlers.splice(r,1)}),n},trigger:function(e,t){t||(t={});var n=i.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var r=this.element;return y.hasParent(t.target,r)&&(r=t.target),r.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this},dispose:function(){var e,t;for(y.toggleBehavior(this.element,this.options.behavior,!1),e=-1;t=this.eventHandlers[++e];)y.off(this.element,t.gesture,t.handler);return this.eventHandlers=[],b.off(this.element,o[m],this.eventStartHandler),null}},function(e){function t(t,r){var i=C.current;if(!(r.options.dragMaxTouches>0&&t.touches.length>r.options.dragMaxTouches))switch(t.eventType){case m:n=!1;break;case d:if(t.distance<r.options.dragMinDistance&&i.name!=e)return;var o=i.startEvent.center;if(i.name!=e&&(i.name=e,r.options.dragDistanceCorrection&&t.distance>0)){var u=Math.abs(r.options.dragMinDistance/t.distance);o.pageX+=t.deltaX*u,o.pageY+=t.deltaY*u,o.clientX+=t.deltaX*u,o.clientY+=t.deltaY*u,t=C.extendEventData(t)}(i.lastEvent.dragLockToAxis||r.options.dragLockToAxis&&r.options.dragLockMinDistance<=t.distance)&&(t.dragLockToAxis=!0);var p=i.lastEvent.direction;t.dragLockToAxis&&p!==t.direction&&(t.direction=y.isVertical(p)?t.deltaY<0?c:s:t.deltaX<0?a:l),n||(r.trigger(e+"start",t),n=!0),r.trigger(e,t),r.trigger(e+t.direction,t);var h=y.isVertical(t.direction);(r.options.dragBlockVertical&&h||r.options.dragBlockHorizontal&&!h)&&t.preventDefault();break;case g:n&&t.changedLength<=r.options.dragMaxTouches&&(r.trigger(e+"end",t),n=!1);break;case f:n=!1}}var n=!1;i.gestures.Drag={name:e,index:50,handler:t,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),i.gestures.Gesture={name:"gesture",index:1337,handler:function(e,t){t.trigger(this.name,e)}},function(e){function t(t,r){var i=r.options,o=C.current;switch(t.eventType){case m:clearTimeout(n),o.name=e,n=setTimeout(function(){o&&o.name==e&&r.trigger(e,t)},i.holdTimeout);break;case d:t.distance>i.holdThreshold&&clearTimeout(n);break;case g:clearTimeout(n)}}var n;i.gestures.Hold={name:e,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:t}}("hold"),i.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==g&&t.trigger(this.name,e)}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(e,t){if(e.eventType==g){var n=e.touches.length,r=t.options;if(n<r.swipeMinTouches||n>r.swipeMaxTouches)return;(e.velocityX>r.swipeVelocityX||e.velocityY>r.swipeVelocityY)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},function(e){function t(t,r){var i,o,s=r.options,a=C.current,c=C.previous;switch(t.eventType){case m:n=!1;break;case d:n=n||t.distance>s.tapMaxDistance;break;case f:!y.inStr(t.srcEvent.type,"cancel")&&t.deltaTime<s.tapMaxTime&&!n&&(i=c&&c.lastEvent&&t.timeStamp-c.lastEvent.timeStamp,o=!1,c&&c.name==e&&i&&i<s.doubleTapInterval&&t.distance<s.doubleTapDistance&&(r.trigger("doubletap",t),o=!0),(!o||s.tapAlways)&&(a.name=e,r.trigger(a.name,t)))}}var n=!1;i.gestures.Tap={name:e,index:100,handler:t,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),i.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(e,t){return t.options.preventMouse&&e.pointerType==u?void e.stopDetect():(t.options.preventDefault&&e.preventDefault(),void(e.eventType==v&&t.trigger("touch",e)))}},function(e){function t(t,r){switch(t.eventType){case m:n=!1;break;case d:if(t.touches.length<2)return;var i=Math.abs(1-t.scale),o=Math.abs(t.rotation);if(i<r.options.transformMinScale&&o<r.options.transformMinRotation)return;C.current.name=e,n||(r.trigger(e+"start",t),n=!0),r.trigger(e,t),o>r.options.transformMinRotation&&r.trigger("rotate",t),i>r.options.transformMinScale&&(r.trigger("pinch",t),r.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case g:n&&t.changedLength<2&&(r.trigger(e+"end",t),n=!1)}}var n=!1;i.gestures.Transform={name:e,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:t}}("transform"),"function"==typeof define&&define.amd?define(function(){return i}):"undefined"!=typeof n&&n.exports?n.exports=i:e.Hammer=i}(window)}),require.register("side-comments/js/main.js",function(e,t,n){function r(e,t,n){this.$el=$(e),this.$body=$("body"),this.eventPipe=new s,this.currentUser=i.clone(t)||null,this.existingComments=i.cloneDeep(n)||[],this.sections=[],this.activeSection=null,this.eventPipe.on("showComments",i.bind(this.showComments,this)),this.eventPipe.on("hideComments",i.bind(this.hideComments,this)),this.eventPipe.on("sectionSelected",i.bind(this.sectionSelected,this)),this.eventPipe.on("sectionDeselected",i.bind(this.sectionDeselected,this)),this.eventPipe.on("commentPosted",i.bind(this.commentPosted,this)),this.eventPipe.on("commentDeleted",i.bind(this.commentDeleted,this)),this.eventPipe.on("addCommentAttempted",i.bind(this.addCommentAttempted,this)),this.$body.on("click",i.bind(this.bodyClick,this)),this.initialize(this.existingComments),this.bindGestures()}var i=t("./vendor/lodash-custom.js"),o=t("./section.js"),s=t("emitter"),a=(t("./helpers/mobile-check.js"),t("hammerjs"));r.prototype.bindGestures=function(){a(this.$el[0],{dragLockToAxis:!0}).on("swiperight",i.bind(function(){this.commentsAreVisible()&&this.activeSection.select()},this))},s(r.prototype),r.prototype.initialize=function(){i.each(this.$el.find(".commentable-section"),function(e){var t=$(e),n=t.data("section-id").toString(),r=i.find(this.existingComments,{sectionId:n});this.sections.push(new o(this.eventPipe,t,this.currentUser,r))},this)},r.prototype.showComments=function(){this.$el.addClass("side-comments-open")},r.prototype.hideComments=function(){this.activeSection&&(this.activeSection.deselect(),this.activeSection=null),this.$el.removeClass("side-comments-open")},r.prototype.sectionSelected=function(e){this.showComments(),this.activeSection&&this.activeSection.deselect(),this.activeSection=e},r.prototype.sectionDeselected=function(){this.hideComments(),this.activeSection=null},r.prototype.commentPosted=function(e){this.emit("commentPosted",e)},r.prototype.commentDeleted=function(e){this.emit("commentDeleted",e)},r.prototype.addCommentAttempted=function(){this.emit("addCommentAttempted")},r.prototype.insertComment=function(e){var t=i.find(this.sections,{id:e.sectionId});t.insertComment(e)},r.prototype.removeComment=function(e,t){var n=i.find(this.sections,{id:e});n.removeComment(t)},r.prototype.deleteComment=function(e,t){var n=i.find(this.sections,{id:e});n.deleteComment(t)},r.prototype.commentsAreVisible=function(){return this.$el.hasClass("side-comments-open")},r.prototype.bodyClick=function(e){var t=$(e.target);t.closest(".side-comment").length<1&&t.closest("body").length>0&&(this.activeSection&&this.activeSection.deselect(),this.hideComments())},r.prototype.setCurrentUser=function(e){this.hideComments(),this.currentUser=e,i.each(this.sections,function(e){e.currentUser=this.currentUser,e.render()})},r.prototype.removeCurrentUser=function(){this.hideComments(),this.currentUser=null,i.each(this.sections,function(e){e.currentUser=null,e.render()})},r.prototype.destroy=function(){this.hideComments(),this.$el.off()},n.exports=r}),require.register("side-comments/js/section.js",function(e,t,n){function r(e,t,n,r){this.eventPipe=e,this.$el=t,this.comments=r?r.comments:[],this.currentUser=n||null,this.clickEventName=a()?"touchstart":"click",this.id=t.data("section-id"),this.$el.on(this.clickEventName,".side-comment .marker",i.bind(this.markerClick,this)),this.$el.on(this.clickEventName,".side-comment .add-comment",i.bind(this.addCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .post",i.bind(this.postCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .cancel",i.bind(this.cancelCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .delete",i.bind(this.deleteCommentClick,this)),this.render(),this.bindGestures()}var i=t("./vendor/lodash-custom.js"),o=t("../templates/section.html"),s=t("../templates/comment.html"),a=t("./helpers/mobile-check.js"),c=t("hammerjs");r.prototype.bindGestures=function(){c(this.$el[0],{dragLockToAxis:!0}).on("swipeleft",i.bind(function(){this.isSelected()||this.select()},this))},r.prototype.markerClick=function(e){e.preventDefault(),this.select()},r.prototype.addCommentClick=function(e){e.preventDefault(),this.currentUser?this.showCommentForm():this.eventPipe.emit("addCommentAttempted")},r.prototype.showCommentForm=function(){this.comments.length>0&&(this.$el.find(".add-comment").addClass("hide"),this.$el.find(".comment-form").addClass("active")),this.focusCommentBox()},r.prototype.hideCommentForm=function(){this.comments.length>0&&(this.$el.find(".add-comment").removeClass("hide"),this.$el.find(".comment-form").removeClass("active")),this.$el.find(".comment-box").empty()},r.prototype.focusCommentBox=function(){setTimeout(i.bind(function(){this.$el.find(".comment-box").get(0).focus()},this),300)},r.prototype.cancelCommentClick=function(e){e.preventDefault(),this.cancelComment()},r.prototype.cancelComment=function(){this.comments.length>0?this.hideCommentForm():(this.deselect(),this.eventPipe.emit("hideComments"))},r.prototype.postCommentClick=function(e){e.preventDefault(),this.postComment()},r.prototype.postComment=function(){this.$el.find(".comment-box").children().not("br").each(function(){$(this).replaceWith(this.innerHTML)});var e=this.$el.find(".comment-box").html(),t={sectionId:this.id,comment:e,authorAvatarUrl:this.currentUser.avatarUrl,authorName:this.currentUser.name,authorId:this.currentUser.id,authorUrl:this.currentUser.authorUrl||null};this.eventPipe.emit("commentPosted",t)},r.prototype.insertComment=function(e){this.comments.push(e);var t=i.template(s,{comment:e,currentUser:this.currentUser});this.$el.find(".comments").append(t),this.$el.find(".side-comment").addClass("has-comments"),this.updateCommentCount(),this.hideCommentForm()},r.prototype.updateCommentCount=function(){this.$el.find(".marker span").text(this.comments.length)},r.prototype.deleteCommentClick=function(e){e.preventDefault();var t=$(e.target).closest("li").data("comment-id");window.confirm("Are you sure you want to delete this comment?")&&this.deleteComment(t)},r.prototype.deleteComment=function(e){var t=i.find(this.comments,{id:e});t.sectionId=this.id,this.eventPipe.emit("commentDeleted",t)},r.prototype.removeComment=function(e){this.comments=i.reject(this.comments,{id:e}),this.$el.find('.side-comment .comments li[data-comment-id="'+e+'"]').remove(),this.updateCommentCount(),this.comments.length<1&&this.$el.find(".side-comment").removeClass("has-comments")},r.prototype.select=function(){this.isSelected()?(this.deselect(),this.eventPipe.emit("sectionDeselected",this)):(this.$el.find(".side-comment").addClass("active"),0===this.comments.length&&this.currentUser&&this.focusCommentBox(),this.eventPipe.emit("sectionSelected",this))},r.prototype.deselect=function(){this.$el.find(".side-comment").removeClass("active"),this.hideCommentForm()},r.prototype.isSelected=function(){return this.$el.find(".side-comment").hasClass("active")},r.prototype.sectionClasses=function(){var e="";return this.comments.length>0&&(e+=" has-comments"),this.currentUser||(e+=" no-current-user"),e},r.prototype.render=function(){this.$el.find(".side-comment").remove(),$(i.template(o,{commentTemplate:s,comments:this.comments,sectionClasses:this.sectionClasses(),currentUser:this.currentUser})).appendTo(this.$el)},r.prototype.destroy=function(){this.$el.off()},n.exports=r}),require.register("side-comments/js/vendor/lodash-custom.js",function(e,t,n){(function(){function t(e){return"\\"+mt[e]}function r(){return $.pop()||[]}function i(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function o(e){e.length=0,$.length<R&&$.push(e)}function s(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(0>i?0:i);++r<i;)o[r]=e[t+r];return o}function a(){}function c(e){function t(){if(r){var e=s(r);St.apply(e,arguments)}if(this instanceof t){var o=u(n.prototype),a=n.apply(o,e||arguments);return E(a)?a:o}return n.apply(i,e||arguments)}var n=e[0],r=e[2],i=e[4];return $t(t,e),t}function l(e,t,n,a,c){if(n){var u=n(e);if("undefined"!=typeof u)return u}var p=E(e);if(!p)return e;var h=kt.call(e);if(!lt[h]||!It.nodeClass&&i(e))return e;var m=Nt[h];switch(h){case tt:case nt:return new m(+e);case ot:case ct:return new m(e);case at:return u=m(e.source,z.exec(e)),u.lastIndex=e.lastIndex,u}var d=qt(e);if(t){var f=!a;a||(a=r()),c||(c=r());for(var g=a.length;g--;)if(a[g]==e)return c[g];u=d?m(e.length):{}}else u=d?s(e):Gt({},e);return d&&(_t.call(e,"index")&&(u.index=e.index),_t.call(e,"input")&&(u.input=e.input)),t?(a.push(e),c.push(u),(d?Bt:Jt)(e,function(e,r){u[r]=l(e,t,n,a,c)}),f&&(o(a),o(c)),u):u}function u(e){return E(e)?At(e):{}}function p(e,t,n){if("function"!=typeof e)return M;if("undefined"==typeof t||!("prototype"in e))return e;var r=e.__bindData__;if("undefined"==typeof r&&(It.funcNames&&(r=!e.name),r=r||!It.funcDecomp,!r)){var i=wt.call(e);It.funcNames||(r=!F.test(i)),r||(r=W.test(i),$t(e,r))}if(r===!1||r!==!0&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return D(e,t)}function h(e){function t(){var e=l?a:this;if(i){var g=s(i);St.apply(g,arguments)}if((o||m)&&(g||(g=s(arguments)),o&&St.apply(g,o),m&&g.length<c))return r|=16,h([n,d?r:-4&r,g,null,a,c]);if(g||(g=arguments),p&&(n=e[f]),this instanceof t){e=u(n.prototype);var v=n.apply(e,g);return E(v)?v:e}return n.apply(e,g)}var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],c=e[5],l=1&r,p=2&r,m=4&r,d=8&r,f=n;return $t(t,e),t}function m(e,t,n,s,a,c){if(n){var l=n(e,t);if("undefined"!=typeof l)return!!l}if(e===t)return 0!==e||1/e==1/t;var u=typeof e,p=typeof t;if(!(e!==e||e&&ht[u]||t&&ht[p]))return!1;if(null==e||null==t)return e===t;var h=kt.call(e),d=kt.call(t);if(h==Q&&(h=st),d==Q&&(d=st),h!=d)return!1;switch(h){case tt:case nt:return+e==+t;case ot:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case at:case ct:return e==String(t)}var f=h==et;if(!f){var g=_t.call(e,"__wrapped__"),v=_t.call(t,"__wrapped__");if(g||v)return m(g?e.__wrapped__:e,v?t.__wrapped__:t,n,s,a,c);if(h!=st||!It.nodeClass&&(i(e)||i(t)))return!1;var b=!It.argsObject&&y(e)?Object:e.constructor,x=!It.argsObject&&y(t)?Object:t.constructor;if(b!=x&&!(C(b)&&b instanceof b&&C(x)&&x instanceof x)&&"constructor"in e&&"constructor"in t)return!1}var E=!a;a||(a=r()),c||(c=r());for(var k=a.length;k--;)if(a[k]==e)return c[k]==t;var T=0;if(l=!0,a.push(e),c.push(t),f){if(k=e.length,T=t.length,l=T==k,l||s)for(;T--;){var w=k,_=t[T];if(s)for(;w--&&!(l=m(e[w],_,n,s,a,c)););else if(!(l=m(e[T],_,n,s,a,c)))break}}else Zt(t,function(t,r,i){return _t.call(i,r)?(T++,l=_t.call(e,r)&&m(e[r],t,n,s,a,c)):void 0}),l&&!s&&Zt(e,function(e,t,n){return _t.call(n,t)?l=--T>-1:void 0});return a.pop(),c.pop(),E&&(o(a),o(c)),l}function d(e,t,n,r,i,o){var a=1&t,l=2&t,u=4&t,p=16&t,m=32&t;if(!l&&!C(e))throw new TypeError;p&&!n.length&&(t&=-17,p=n=!1),m&&!r.length&&(t&=-33,m=r=!1);var f=e&&e.__bindData__;if(f&&f!==!0)return f=s(f),f[2]&&(f[2]=s(f[2])),f[3]&&(f[3]=s(f[3])),!a||1&f[1]||(f[4]=i),!a&&1&f[1]&&(t|=8),!u||4&f[1]||(f[5]=o),p&&St.apply(f[2]||(f[2]=[]),n),m&&Pt.apply(f[3]||(f[3]=[]),r),f[1]|=t,d.apply(null,f);var g=1==t||17===t?c:h;return g([e,t,n,r,i,o])}function f(){pt.shadowedProps=J,pt.array=pt.bottom=pt.loop=pt.top="",pt.init="iterable",pt.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)pt[n]=e[n];var r=pt.args;pt.firstArg=/^[^,]+/.exec(r)[0];var i=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+Lt(pt)+"\n}");return i(p,rt,xt,_t,q,y,qt,T,pt.keys,Ct,ht,Ut,ct,Et,kt)}function g(e){return zt[e]}function v(e){return"function"==typeof e&&Tt.test(e)}function y(e){return e&&"object"==typeof e&&"number"==typeof e.length&&kt.call(e)==Q||!1}function b(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),l(e,t,"function"==typeof n&&p(n,r,1))}function x(e,t,n){return l(e,!0,"function"==typeof t&&p(t,n,1))}function C(e){return"function"==typeof e}function E(e){return!(!e||!ht[typeof e])}function T(e){return"string"==typeof e||e&&"object"==typeof e&&kt.call(e)==ct||!1}function w(e){for(var t=-1,n=Yt(e),r=n.length,i=Array(r);++t<r;)i[t]=e[n[t]];return i}function _(e,t,n){var r=[];if(t=a.createCallback(t,n,3),qt(e))for(var i=-1,o=e.length;++i<o;){var s=e[i];t(s,i,e)&&r.push(s)}else Bt(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function S(e,t,n){if(t=a.createCallback(t,n,3),!qt(e)){var r;return Bt(e,function(e,n,i){return t(e,n,i)?(r=e,!1):void 0}),r}for(var i=-1,o=e.length;++i<o;){var s=e[i];if(t(s,i,e))return s}}function j(e,t,n){if(t&&"undefined"==typeof n&&qt(e))for(var r=-1,i=e.length;++r<i&&t(e[r],r,e)!==!1;);else Bt(e,t,n);return e}function P(e,t,n){return t=a.createCallback(t,n,3),_(e,function(e,n,r){return!t(e,n,r)})}function D(e,t){return arguments.length>2?d(e,17,s(arguments,2),null,t):d(e,1,null,null,t)}function A(e,t,n){var r=typeof e;if(null==e||"function"==r)return p(e,t,n);if("object"!=r)return U(e);var i=Yt(e),o=i[0],s=e[o];return 1!=i.length||s!==s||E(s)?function(t){for(var n=i.length,r=!1;n--&&(r=m(t[i[n]],e[i[n]],null,!0)););return r}:function(e){var t=e[o];return s===t&&(0!==s||1/s==1/t)}}function O(e){return null==e?"":String(e).replace(Ft,g)}function M(e){return e}function N(){}function U(e){return function(t){return t[e]}}function I(e,n,r){var i=a.templateSettings;e=String(e||""),r=Wt({},r,i);var o,s=Wt({},r.imports,i.imports),c=Yt(s),l=w(s),u=0,p=r.interpolate||G,h="__p += '",m=RegExp((r.escape||G).source+"|"+p.source+"|"+(p===B?X:G).source+"|"+(r.evaluate||G).source+"|$","g");e.replace(m,function(n,r,i,s,a,c){return i||(i=s),h+=e.slice(u,c).replace(Z,t),r&&(h+="' +\n__e("+r+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=c+n.length,n}),h+="';\n";var d=r.variable,f=d;f||(d="obj",h="with ("+d+") {\n"+h+"\n}\n"),h=(o?h.replace(Y,""):h).replace(H,"$1").replace(V,"$1;"),h="function("+d+") {\n"+(f?"":d+" || ("+d+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+K++ +"]")+"\n*/";try{var v=Function(c,"return "+h+g).apply(L,l)}catch(y){throw y.source=h,y}return n?v(n):(v.source=h,v)}var L,$=[],q={},R=40,Y=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,z=/\w*$/,F=/^\s*function[ \n\r\t]+\w/,B=/<%=([\s\S]+?)%>/g,G=/($^)/,W=/\bthis\b/,Z=/['\n\r\t\u2028\u2029\\]/g,J=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],K=0,Q="[object Arguments]",et="[object Array]",tt="[object Boolean]",nt="[object Date]",rt="[object Error]",it="[object Function]",ot="[object Number]",st="[object Object]",at="[object RegExp]",ct="[object String]",lt={};lt[it]=!1,lt[Q]=lt[et]=lt[tt]=lt[nt]=lt[ot]=lt[st]=lt[at]=lt[ct]=!0;var ut={configurable:!1,enumerable:!1,value:null,writable:!1},pt={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},ht={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},mt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},dt=ht[typeof window]&&window||this,ft=ht[typeof e]&&e&&!e.nodeType&&e,gt=ht[typeof n]&&n&&!n.nodeType&&n,vt=gt&&gt.exports===ft&&ft,yt=ht[typeof global]&&global;
!yt||yt.global!==yt&&yt.window!==yt||(dt=yt);var bt=[],xt=Error.prototype,Ct=Object.prototype,Et=String.prototype,kt=Ct.toString,Tt=RegExp("^"+String(kt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),wt=Function.prototype.toString,_t=Ct.hasOwnProperty,St=bt.push,jt=Ct.propertyIsEnumerable,Pt=bt.unshift,Dt=function(){try{var e={},t=v(t=Object.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),At=v(At=Object.create)&&At,Ot=v(Ot=Array.isArray)&&Ot,Mt=v(Mt=Object.keys)&&Mt,Nt={};Nt[et]=Array,Nt[tt]=Boolean,Nt[nt]=Date,Nt[it]=Function,Nt[st]=Object,Nt[ot]=Number,Nt[at]=RegExp,Nt[ct]=String;var Ut={};Ut[et]=Ut[nt]=Ut[ot]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Ut[tt]=Ut[ct]={constructor:!0,toString:!0,valueOf:!0},Ut[rt]=Ut[it]=Ut[at]={constructor:!0,toString:!0},Ut[st]={constructor:!0},function(){for(var e=J.length;e--;){var t=J[e];for(var n in Ut)_t.call(Ut,n)&&!_t.call(Ut[n],t)&&(Ut[n][t]=!1)}}();var It=a.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments);It.argsClass=kt.call(arguments)==Q,It.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),It.enumErrorProps=jt.call(xt,"message")||jt.call(xt,"name"),It.enumPrototypes=jt.call(e,"prototype"),It.funcDecomp=!v(dt.WinRTError)&&W.test(function(){return this}),It.funcNames="string"==typeof Function.name,It.nonEnumArgs=0!=r,It.nonEnumShadows=!/valueOf/.test(n),It.spliceObjects=(bt.splice.call(t,0,1),!t[0]),It.unindexedChars="x"[0]+Object("x")[0]!="xx";try{It.nodeClass=!(kt.call(document)==st&&!({toString:0}+""))}catch(i){It.nodeClass=!0}}(1),a.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:B,variable:"",imports:{_:a}};var Lt=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",It.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):It.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),It.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),It.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(It.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),It.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",It.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||It.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"};At||(u=function(){function e(){}return function(t){if(E(t)){e.prototype=t;var n=new e;e.prototype=null}return n||dt.Object()}}());var $t=Dt?function(e,t){ut.value=t,Dt(e,"__bindData__",ut)}:N;It.argsClass||(y=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&_t.call(e,"callee")&&!jt.call(e,"callee")||!1});var qt=Ot||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&kt.call(e)==et||!1},Rt=f({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),Yt=Mt?function(e){return E(e)?It.enumPrototypes&&"function"==typeof e||It.nonEnumArgs&&e.length&&y(e)?Rt(e):Mt(e):[]}:Rt,Ht={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:Yt,loop:"if (callback(iterable[index], index, collection) === false) return result"},Vt={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:Yt,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},Xt={top:"if (!objectTypes[typeof iterable]) return result;\n"+Ht.top,array:!1},zt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ft=RegExp("["+Yt(zt).join("")+"]","g"),Bt=f(Ht),Gt=f(Vt,{top:Vt.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Wt=f(Vt),Zt=f(Ht,Xt,{useHas:!1}),Jt=f(Ht,Xt);C(/x/)&&(C=function(e){return"function"==typeof e&&kt.call(e)==it}),a.assign=Gt,a.bind=D,a.createCallback=A,a.defaults=Wt,a.filter=_,a.forEach=j,a.forIn=Zt,a.forOwn=Jt,a.keys=Yt,a.property=U,a.reject=P,a.values=w,a.each=j,a.extend=Gt,a.select=_,a.clone=b,a.cloneDeep=x,a.escape=O,a.find=S,a.identity=M,a.isArguments=y,a.isArray=qt,a.isFunction=C,a.isObject=E,a.isString=T,a.noop=N,a.template=I,a.detect=S,a.findWhere=S,a.VERSION="2.4.1",ft&&gt&&(vt?(gt.exports=a)._=a:ft._=a)}).call(this)}),require.register("side-comments/js/helpers/mobile-check.js",function(e,t,n){n.exports=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}}),require.register("side-comments/templates/section.html",function(e,t,n){n.exports='<div class="side-comment <%= sectionClasses %>">\n  <a href="#" class="marker">\n    <span><%= comments.length %></span>\n  </a>\n  \n  <div class="comments-wrapper">\n    <ul class="comments">\n      <% _.each(comments, function( comment ){ %>\n        <%= _.template(commentTemplate, { comment: comment, currentUser: currentUser }) %>\n      <% }) %>\n    </ul>\n    \n    <a href="#" class="add-comment">Leave a comment</a>\n    \n    <% if (currentUser){ %>\n      <div class="comment-form">\n        <div class="author-avatar">\n          <img src="<%= currentUser.avatarUrl %>">\n        </div>\n        <p class="author-name">\n          <%= currentUser.name %>\n        </p>\n        <input type="text" class="comment-box right-of-avatar" placeholder="Leave a comment...">\n        <div class="actions right-of-avatar">\n          <a href="#" class="action-link post">Post</a>\n          <a href="#" class="action-link cancel">Cancel</a>\n        </div>\n      </div>\n    <% } %>\n  </div>\n</div>'}),require.register("side-comments/templates/comment.html",function(e,t,n){n.exports='<li data-comment-id="<%= comment.id %>">\n  <div class="author-avatar">\n    <img src="<%= comment.authorAvatarUrl %>">\n  </div>\n  <% if (comment.authorUrl) { %>\n    <a class="author-name right-of-avatar" href="<%= comment.authorUrl %>">\n      <%= comment.authorName %>\n    </a>\n  <% } else { %>\n    <p class="author-name right-of-avatar">\n      <%= comment.authorName %>\n    </p>\n  <% } %>\n  <p class="comment right-of-avatar">\n    <%= comment.comment %>\n  </p>\n  <% if (currentUser && comment.authorId === currentUser.id){ %>\n  <a href="#" class="action-link delete">Delete</a>\n  <% } %>\n</li>'}),require.alias("component-emitter/index.js","side-comments/deps/emitter/index.js"),require.alias("component-emitter/index.js","emitter/index.js"),require.alias("eightmedia-hammer.js/hammer.js","side-comments/deps/hammerjs/hammer.js"),require.alias("eightmedia-hammer.js/hammer.js","side-comments/deps/hammerjs/index.js"),require.alias("eightmedia-hammer.js/hammer.js","hammerjs/index.js"),require.alias("eightmedia-hammer.js/hammer.js","eightmedia-hammer.js/index.js"),require.alias("side-comments/js/main.js","side-comments/index.js");